---
title: "生成に関するパターン 概要"
---

# 生成に関するパターン（Creational Patterns）

## 概要

生成に関するパターンは、オブジェクトの生成プロセスを抽象化するパターン群です。オブジェクトの生成方法に柔軟性を持たせ、システムの依存性を減らすことを目的としています。

## なぜ生成パターンが必要か

オブジェクトを直接 `new` やリテラルで生成すると、以下の問題が発生します：

1. **密結合**: 生成するクラスを直接参照することで、依存関係が固定される
2. **変更の困難さ**: 生成ロジックが散在すると、変更時の影響範囲が広がる
3. **テストの困難さ**: 具体的な実装に依存すると、モックへの差し替えが難しい

生成パターンを使うことで、**何を生成するか**と**どう使うか**を分離できます。

## Goにおける生成パターン

Go言語には `new` キーワードがありますが、主に以下の方法でオブジェクトを生成します：

```go
// 1. リテラル
user := User{Name: "田中"}

// 2. new（ゼロ値で初期化されたポインタを返す）
user := new(User)

// 3. コンストラクタ関数（慣習的なパターン）
user := NewUser("田中")

// 4. ポインタを返すリテラル
user := &User{Name: "田中"}
```

Goではコンストラクタ関数（`New`プレフィックス）が一般的であり、これが生成パターンの基盤となります。

## 5つの生成パターン

| パターン | 目的 | Goでの特徴 |
|---------|------|-----------|
| **Singleton** | インスタンスを1つに制限 | `sync.Once` で安全に実装 |
| **Factory Method** | 生成をサブクラスに委譲 | インターフェースと関数で実現 |
| **Abstract Factory** | 関連オブジェクト群を生成 | インターフェースの組み合わせ |
| **Builder** | 複雑なオブジェクトを段階的に構築 | メソッドチェーンが一般的 |
| **Prototype** | 既存オブジェクトをコピー | Clone メソッドを実装 |

## いつどのパターンを使うか

```
オブジェクトを1つだけにしたい
  → Singleton

生成するオブジェクトの種類を動的に決めたい
  → Factory Method

関連するオブジェクト群をまとめて生成したい
  → Abstract Factory

多くのオプションを持つ複雑なオブジェクトを生成したい
  → Builder

既存オブジェクトを元に新しいオブジェクトを作りたい
  → Prototype
```

## 本章の流れ

次章以降、各パターンを以下の流れで解説します：

1. **Singleton**: グローバルなアクセスポイントを提供
2. **Factory Method**: 生成ロジックをサブクラスに委譲
3. **Abstract Factory**: 一貫性のあるオブジェクト群を生成
4. **Builder**: 複雑なオブジェクトを段階的に構築
5. **Prototype**: オブジェクトのクローンを作成

それでは、最もシンプルなSingletonパターンから始めましょう。
